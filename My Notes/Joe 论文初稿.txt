Joe 论文初稿



华南师范大学增城学院毕业设计（论文）



公交线路查询系统的设计与实现


学生姓名：黄思夏
学 号：049524161
专业班级：电子商务（1）班
指导教师：张小兰


2008年4月30日
摘 要

随着世界范围的城市化进程加速，密集型的城市居住和工作环境日渐成熟并得到大规模的普及应用。公共交通工具成为城市生活的必要组成部分。
论文结合智能公交查询软件项目，具体谈谈公交车线路查询系统的实现和算法的优化处理。在软件项目中，我们以深圳市为例，用Microsoft Access尝试构建公交线路数据库，用Microsoft VisualBasic进行程序开发，结合SQL结构化数据查询语言，实现了深圳市的公交线路的智能查询。该项目主要包括换乘查询、线路查询和站点查询功能。我们在设计软件的时候充分考虑了程序的人机交互体验，以最友好的方式给用户提供公交线路参考。
对于庞大的公交车线路、站点和地理位置数据，程序算法的优劣决定着程序响应的速度，直接影响着用户的使用体验。因此，项目在设计的时候特别花心思在算法的优化上。

关键词:；；
ABSTRACT
………………

Keywords: ……; ……;
目 录

第一章 前 言 1
1．引言 1
城市公共交通作为城市交通网络中的重要组成部分，是城市内部人流的主要传输载体，对降低车辆流量、舒缓交通负载与堵塞、改善车流效率发挥至关重要的作用。如何快速寻找一条经济、合理、方便的最优乘车路线或换乘方案，成为城市居民和外地旅客一个非常困惑的问题。[1] 1
一般的最优乘车线路即最优路径是依据网络拓扑关系，通过计算起点到终点的最短路径来解决的。虽然，公交网络在数学上也可以描述为一个网络，但它与图论中的网络图存在较大的区别。如果，直接用图论中描述网络图的方法来描述公交网络，是一件比较困难的事，所以，公交最优乘车路线问题不适合用经典的最短路径算法来解决。随着数据库技术的发展，数据库的运算效率大大提高，用数据库来表示公交网络，用数据库查询技术实现公交的最优乘车路线查询，完全可以满足用户出行查询的要求。[2] 1
在互联网普及的今天，交通信息服务的电子化是必然趋势。虽然互联网上存在着许多公交信息查询系统，然而脱离网络的公交信息查询系统却并不多见。为了能够为市民特别是为外来旅游、出差、就医、求职等急需了解本地的公交路线的人提供高效、方便、快捷的公交信息查询，让他们得到自己所需要的各种相关信息，以便减少各种可能产生不必要的交通流量，提高公交的运作效率，基于此目的特进行本系统的设计。  1
该系统加入了著名地点商店的查询，方便了用户的查询，又能起到进一步推广著名商店的作用。节约商店广告的成本，有利于实现生产要素的最佳配置和极大地节约物质、能源资源等等。这是信息充分化带来的必然好处。 1
2. 研究背景 1
3. 系统目标 2
第二章 系统分析 3
1. 系统目标 3
2. 体系结构规划 3
4. 需求分析 3
4.1 数据库描述（每个字段名，数据类型，含义都要仔细描述，不能用××代替） 3
4.2 数据流图 5
5. 可行性分析研究 5
第三章 系统总体设计 6
1. 数据库模式的选择 6
2. 概要设计 6
3. 详细设计 7
3.1 主要模块功能详述 7
3.2 数据库设计过程 7
3.3 连接数据库 8
9
4. 界面设计 9
4.1 以用户为中心的界面设计 9
4.2 界面窗口 9
第四章 系统平台的选用 10
1. 数据库技术的现状与发展 10
2. 数据库系统的选择原则 10
3. 系统开发工具的选择 10
第五章 系统测试 11
1. 对软件进行测试的基本原则 11
2. 对软件进行测试的主要方法 11
3. 测试内容及结果 11
4. 系统存在的问题 11
第六章 结 论 12
1. 本系统特点  12
2. 开发心得 12
致 谢 13
参考文献 14
[1] 陈立潮，刘玉树，张永梅．城市交通智能咨询系统的设计与实现[J]．计算机工程，2003；29(1)：32-340．  14
[2] 严蔚敏，吴伟民．数据结构[M]．清华大学出版社，1996．附 录 14
第一章 前 言
1．引言
城市公共交通作为城市交通网络中的重要组成部分，是城市内部人流的主要传输载体，对降低车辆流量、舒缓交通负载与堵塞、改善车流效率发挥至关重要的作用。如何快速寻找一条经济、合理、方便的最优乘车路线或换乘方案，成为城市居民和外地旅客一个非常困惑的问题。[1]
一般的最优乘车线路即最优路径是依据网络拓扑关系，通过计算起点到终点的最短路径来解决的。虽然，公交网络在数学上也可以描述为一个网络，但它与图论中的网络图存在较大的区别。如果，直接用图论中描述网络图的方法来描述公交网络，是一件比较困难的事，所以，公交最优乘车路线问题不适合用经典的最短路径算法来解决。随着数据库技术的发展，数据库的运算效率大大提高，用数据库来表示公交网络，用数据库查询技术实现公交的最优乘车路线查询，完全可以满足用户出行查询的要求。[2]
在互联网普及的今天，交通信息服务的电子化是必然趋势。虽然互联网上存在着许多公交信息查询系统，然而脱离网络的公交信息查询系统却并不多见。为了能够为市民特别是为外来旅游、出差、就医、求职等急需了解本地的公交路线的人提供高效、方便、快捷的公交信息查询，让他们得到自己所需要的各种相关信息，以便减少各种可能产生不必要的交通流量，提高公交的运作效率，基于此目的特进行本系统的设计。
该系统加入了著名地点商店的查询，方便了用户的查询，又能起到进一步推广著名商店的作用。节约商店广告的成本，有利于实现生产要素的最佳配置和极大地节约物质、能源资源等等。这是信息充分化带来的必然好处。
2. 研究背景
在西方国家(如美国、日本等)．在城市公交网络系统上投人了极大的财力．构建了利用计算机网络和先进的通信系统的智能运输系统ITS(Intelligence Transport System) ．从而实现了大范围内全方位发挥的实时、准确、高效的运输综合管理，使人、车、路密切配合，和谐统一 ，大大改善了交通环境等。国内在这方面的起步较晚，但是各地政府都给予了极大的重视 ．相继建立了网上公交查询系统 ，但是效果不甚理想 。
主要存在以下一些问题 ：
(1)查询界面不直观。目前大多数公交查询系统都以输入起始站点和终到站点的方式进行文本查询，而不能和城市地图匹配，这给那些不熟悉城市公交站点的出行者(如外地游客)带来了很大困难.
(2)查询结果有限。大部分公交查询系统都普遍存在查询速度问题，即由于公交查询运算速度与乘换次数是成几何级数关系增长的，所以这类查询系统一般都只能提供乘换两次以内的查询结果。这个也需要斟酌，因为你们做的系统也存在速度问题，并且也只是做了换乘两次以内的查询。
(3)提供信息不全。目前的公交查询系统没有提供针对某一特定站点。查询通过该站点所有公交路线。以及针对某一特定公交线路的始发车和收班车时间、发车时间间隔等信息，而这些信息对于公交查询系统是必要的。
(4)公交线路更改不便。由于公交数据结构的原因，在大多数公交系统中．如果需要更改其中某一条公交线路或需要增加一条新的公交线路。则需要对数据库进行重构。
综合上述的研究背景，介绍你论文的研究目标，以及实现的功能。
3. 系统目标
公交查询系统主要服务于对市内公交线路不太熟悉的居民以及外地旅客，他们在选择公交线路和乘车方案时存在着很大的盲目性，而该查询系统除了可以为出行者础信息、线路运行信息外，还可以将经过计算机分析的最佳出行线路及换乘方案推荐给导乘客合理化选择线路，减少乘客的出行延误，从而提高整个城市公交线网的运行效率。
第二章 系统分析
1. 系统目标
公交查询系统开发的目的是为乘客的出行提供准确、及时、优化的公交信息服务。系统向乘客提供公交信息的动态走向，生成出行辅助计划，对乘客的出行进行主动而合理的引导，较大程度上方便乘客，从而将无序的交通出行变得有序，优化客流分布，提高公交线网的运行效率，同时将该系统投入实际应用也是提高城市形象的一项重要举措。
乘客能够对现有的公交站点、公交线路、运营计划进行查询。乘客输入任意出行起点、终点，系统可在相应的约束条件下，查找搜索出最优公交出行路径和换乘方案，最后以图的形式反馈给乘客。同时管理人员可根据站点、线路的变更，运营调度计划的调整，及时更新系统的公交线网，对与公交有关的其他基础数据方便地进行管理和维护。
2. 体系结构规划
本系统的建立遵循以下基本原则：
1)规范化，系统的信息来源、数据组成与结构模式尽量满足国家数字化生产及运作的标准与规范；
2)实用性，无论是系统的设计思路或应用模式均突出方便实用的基本原则；
3)科学性，系统的内容结构与分类方法充分体现已有的科学研究成果，力求完整、系统、简洁。
此外，系统的建立还遵循可扩展性与灵活性的原则要求。
4. 需求分析
随着城市化的进程加快，公共交通工具在城市交通中担当着越来越重要的角色。但是目前，城市公交线路庞大复杂，人们在出行时难免会为乘坐公交而头疼。而信息技术不断发展的趋势下，人们对一些信息的求知也日益增加。因此，开发一套供人们快速查找公交线路的系统势在必行。
综合考虑各城市、车次的类型：按车次的线路类型可以分为上行、下行环线，一些大城市可能还会有区问车的说法；
4.1 数据库描述（每个字段名，数据类型，含义都要仔细描述，不能用××代替）
Line_Info：这是对公交线路的数据库，里面包含有公交线路号数，起始站点，终点站点，所属汽车公司，所经过的站点，站点分为上下行两种。
字段名称

数据类型

描述
Line_Num

数字

公交线路名称
Terminal_Begin

文本

起始站点
Terminal_End

文本

终点站点
Stations_Up_Going

文本

上行的站点
Stations_Down_Going

文本

下行的站点

Locations_Info：里面包含的数据是地方名的相对位置，在该系统的地图上用相对坐标来定位具体位置。就算用户不知道站点名字，也能通过地方名来进行查询。
字段名称

数据类型

描述
Location

文本

地点名称
Position_X

数字

相对X坐标
Position_Y

数字

相对Y坐标


Stations_Info：储存的是站点在地图上的相对坐标的信息，同上面一样采用的是相对位置的方式来保存信息。
字段名称

数据类型

描述
Station_Name

文本

站点名称
Position_X

数字

相对X坐标
Position_Y

数字

相对Y坐标

XXX.Info:保存的是例如麦当劳之类的比较闻名的地方名。能给拥护提供站点附件商场或者旅景点。
XXX




XXXX




XXX




XXX





Yyy.info:储存的是公交车的线路，如拐弯点之累的能显示一条完整公交线的数据，和上面的都一样，采用相对坐标的手段来进行定位。
XXX




XXX




XXX




XX






4.2 数据流图

5. 可行性分析研究

第三章 系统总体设计
1. 数据库模式的选择
数据库(Database，简称DB)是存储在计算机内、有组织的、可共享的相关数据的集合。数据库中的数据按一定
的数据模型组织、描述和存储，具有较小的冗余度、较高的数据独立性和扩展性，并可为各种用户共享。数据库中的数据是高度结构化的，可以存储大量的数据，并且能够方便数据的查询，另外数据库还具有较好的保护数据安全和维护数据一致性的措施，能够方便数据的共享。
2. 概要设计










3. 详细设计
3.1 主要模块功能详述

3.2 数据库设计过程
数据库的设计过程如图3-1所示。在数据库设计过程中，需求分析和概念设计可以独立于任何数据库管理系统进行。逻辑设计和物理设计与具体的数据库管理系统密切相关。由于需求分析比较重要。我们在设计的时候，花了比较多的时间。在获得这些资料之后，进行分析。从中提取有用的部分。分析各种用户的权限。





需求分析




需求分析说明书


概念数据库设计


概念数据库模式
独立于数据 （高级数据模型）

逻辑数据库设计
理系统相关




逻辑数据库模式
（特定数据模型）

物理数据库设计





物理数据库模式
（特定的物理存储结构和存取方式）

数据库设计过程
3.3 连接数据库
以Visual Basic作为前台开发工具，Access作为后台数据库。采用Visual Basic语言的ADO Data控件存Access数据库。ADO数据访问接121是最新的数据库访问技术，用它可以创建几个对象就可连接数据源、获取所需数据和进行数据访问后的保存操作。ADO对象模型定义了一个可编程的分层对象集合，主要由三个对象成员Connection、Command和Recordset对象，以及几个集合对象Errors、Parameters和Fidlds等组成。
ADO Data控件可以执行大部份数据库访问操作，例如：数据指针(SQL语言称为游标技术)的移动、赋值等功能。
但并不能显示数据库中数据的内容。ADO Data控件通常与“数据觉察”控件Data List控件、Data Combo控件和Data Grid控件结合使用。当ADO Data控件中当前记录发生变化时，“数据觉察”控件的内容也会随之发生变化。



连接数据库

4. 界面设计
4.1 以用户为中心的界面设计


4.2 界面窗口


第四章 系统平台的选用

1. 数据库技术的现状与发展
1.1 数据库的分类
(1)Jet数据库：数据库由Jet引擎直接生成和操作，不仅灵活而且速度快，Microsoft Access和VB使用相同的Jet数据库引擎。
(2)ISAM数据库：索引顺序访问方法(ISAM)数据库。有同种不同形式，如Dbase、FoxPro、TextFiles和Paradox。在VB中可以生成和操作这些数据库。
(3)ODBC数据库：开放数据库连接。这类数据库包括遵守ODBC标准的客户／Ha务器数据库，如Microsoft SQL Server等。
1.2 Microsoft Acess 数据库
① Access程序简介。
Microsoft Access是一个关系型桌面数据库管理系统，它可以用来建立中、小型的数据库应用系统。自从1992年首次发布以来，Microsoft Access已逐渐成为桌面数据库的领导者。
② Access的主要特点
Access是微软公司开发的第一个面向Windows平台的桌面数据库管理系统，它充分利用了Windows平台的优越性；Access利用系统提供的向导或生成器，使用几个简单的宏或VBA语句，就可以迅速建立简单的应用程序；Access中的数据库文件不是简单存储数据的表，这是Access与其他桌面数据库的一个重要区别。Access数据库文件不仅公包含传统意义上的表，还包括操作或控制数据的其他对象(如查询、窗体和报表等)。
③结构化查询语言SQL。

2. 数据库系统的选择原则


3. 系统开发工具的选择



第五章 系统测试

1. 对软件进行测试的基本原则


2. 对软件进行测试的主要方法


3. 测试内容及结果


4. 系统存在的问题



第六章 结 论

1. 本系统特点

2. 开发心得
致 谢

内容请同学们自己撰写。
参考文献
[1] 陈立潮，刘玉树，张永梅．城市交通智能咨询系统的设计与实现[J]．计算机工程，2003；29(1)：32-340．
[2] 严蔚敏，吴伟民．数据结构[M]．清华大学出版社，1996．附 录

附录A
A.1 查询模块源代码
procedure TForm4.Button7Click(Sender: TObject);

A.2 统计模块源代码
end;
A.3 数据库备份模块源代码
附录B
B.1 查询模块生成页面

B.2 统计模块生成页面

B.3 数据库备份生成页面


意见：
第一章部分，基本上还过的去，从结构来讲是可以的。但是内容还要进一步充实。（具体看前面的批注）

第二章部分，感觉有些多余，有些内容是不是可以移到第一章里面去。（具体看前面的批注）。
这章的内容暂定吧，你先空出来，我们一起商量下看写什么内容

第三章 公交线路查询系统的数据库设计 （这个是重点，我觉得你应该写的是这个方面的内容。）
1.首先介绍数据库设计的理论
2.介绍公交线路查询系统的数据库分析（包括需求说明等，简单描述即可）
3.介绍公交线路查询系统的数据库设计
这个地方是重点。要将数据库设计的概念结构设计、逻辑结构设计，都包含进去。最好能用ER图表达公交线路查询系统的概念层模型。用关系数据表，也就是Access里的表结构去表达该系统的逻辑结构模型。在这个部分的最后是得到一个一个表，分别将表的结构列出来，含有哪些列，每个列用什么数据类型去表达，含义是什么都要描述清楚。
第四个部分 公交线路查询系统的实现
     1.     介绍该系统的目标、总体设计，最好用图说明
     2.     介绍你采用什么工具，如Access、Vb。分别介绍这两种工具的好处，很多文章里都有所涉及，去图书馆的中国期刊网上去下载。
     3.     简单介绍你的开发。
     4.     给出最终的结果图。
第五个部分 结论
     1.     数据库设计的好处，构建的公交线路查询系统能实现的功能
     2.     还存在哪些缺点，构建的系统还不能解决的问题有哪些


注意：后面这几个部分的标题都是暂定的，到时候我们可以一起探讨。但是按我的思路，论文的基本框架应该是这样的。如果你觉得可以，可以参考我的意见。如果你参考我的意见，可能需要将部分文字在章节方面做重新调整。
总的来说，你的论文大概涵盖了最终的要求，但还需要细细修改。时间不多了，你们要抓紧时间，甚至要牺牲你的休息时间来完成论文。
